<!DOCTYPE html>
<html>
<head>
  <title>Mystery Game</title>
  <style>
    /* 自定义样式 */
    #puzzle2 {
      display: none;
      margin-top: 20px;
      padding: 10px;
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>
  <h1>Welcome to the Mystery Game!</h1>
  
  <p>Enter the correct answer to proceed to the next puzzle:</p>
  <input type="text" id="answerInput">
  <button onclick="checkAnswer()">Submit</button>

  <div id="puzzle2" style="display: none;">
    <!-- Puzzle2的内容 -->
    <h2>Puzzle 2</h2>
    <p>This is Puzzle 2.</p>
  </div>

  <script>
    // 页面加载时检查用户解锁的谜题数量
    function checkUnlockedPuzzleNumber() {
      var unlockedPuzzleNumber = localStorage.getItem("unlocked_puzzle_number");
      if (!unlockedPuzzleNumber) {
        // 初始情况下用户解锁了3道题
        unlockedPuzzleNumber = 3;
        localStorage.setItem("unlocked_puzzle_number", unlockedPuzzleNumber);
      }
      return parseInt(unlockedPuzzleNumber);
    }

    // 获取正确答案列表
    function getAnswerList() {
      // 隐藏的答案列表
      var answerList = [
        "answer1",
        "answer2",
        "answer3",
        // ...更多答案
      ];
      return answerList;
    }

    // 渲染题目
    function renderQuestions() {
      var unlockedPuzzleNumber = checkUnlockedPuzzleNumber();
      var answerList = getAnswerList();

      // 根据解锁的谜题数量进行渲染
      for (var i = 0; i < unlockedPuzzleNumber; i++) {
        var questionElement = document.createElement("p");
        questionElement.textContent = "Question " + (i + 1);
        document.body.appendChild(questionElement);
      }
    }

    // 判断回答正误
    function checkAnswer() {
      var answer = document.getElementById("answerInput").value;
      var answerList = getAnswerList();
      var unlockedPuzzleNumber = checkUnlockedPuzzleNumber();

      if (answer === answerList[unlockedPuzzleNumber]) {
        // 回答正确
        unlockedPuzzleNumber++;
        localStorage.setItem("unlocked_puzzle_number", unlockedPuzzleNumber);

        if (unlockedPuzzleNumber === answerList.length) {
          // 已经解锁了所有谜题，显示Puzzle2
          var puzzle2Div = document.getElementById("puzzle2");
          puzzle2Div.style.display = "block";
        } else {
          // 清除旧的题目，并重新渲染题目
          document.body.innerHTML = "";
          renderQuestions();
        }
      } else {
        alert("Wrong answer. Try again!");
      }
    }

    // 页面加载时渲染题目
    window.onload = function() {
      renderQuestions();
    };
  </script>
</body>
</html>
