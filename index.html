<!DOCTYPE html>
<html>
<head>
  <title>Mystery Game</title>
</head>
<body>
  <h1>Welcome to the Mystery Game!</h1>
  
  <p>Enter the correct answer to proceed to the next puzzle:</p>
  <input type="text" id="answerInput">
  <button onclick="checkAnswer()">Submit</button>

  <script>
    // 页面加载时检查用户的提交历史
    window.onload = function() {
      var answerHistory = localStorage.getItem("answerHistory");
      if (answerHistory === "correct") {
        // 用户之前提交过正确答案，执行相应操作
        // 例如直接跳转到下一个谜题页面
        window.location.href = "puzzle2.html";
      }
    }

    // 检查用户的提交记录
    function checkAnswerHistory() {
      var answerHistory = localStorage.getItem("answerHistory");
      var numberOfCorrectAnswers = 0;

      if (answerHistory) {
        // 解析存储的答案记录
        var answers = answerHistory.split(",");
        numberOfCorrectAnswers = answers.length;
      }

      return numberOfCorrectAnswers;
    }

    // 根据用户的提交记录来确定题目数量
    function determineNumberOfQuestions() {
      var numberOfCorrectAnswers = checkAnswerHistory();
      var numberOfQuestionsToShow = numberOfCorrectAnswers + 4; // 显示已解答的题目加上后续的4道新题目

      return numberOfQuestionsToShow;
    }

    // 渲染题目
    function renderQuestions() {
      var numberOfQuestionsToShow = determineNumberOfQuestions();

      // 根据题目数量进行渲染
      for (var i = 1; i <= numberOfQuestionsToShow; i++) {
        var questionElement = document.createElement("p");
        questionElement.textContent = "Question " + i;
        document.body.appendChild(questionElement);
      }
    }

    // 判断回答正误
    function checkAnswer() {
      var answer = document.getElementById("answerInput").value;
      if (answer === "correct") {
        // 存储用户的正确答案
        localStorage.setItem("answerHistory", "correct");
        window.reload(); // 刷新谜题页面，从而解锁新的题目
      } else {
        alert("Wrong answer. Try again!");
      }
    }
    
    // 页面加载时渲染题目
    window.onload = function() {
      renderQuestions();
    }
  </script>
</body>
</html>


<body>


  <script>
  </script>
</body>
</html>

