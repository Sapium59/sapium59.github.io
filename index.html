<!DOCTYPE html>
<html>
  <head>
    <title>Puzzle Game</title>
    <script>
      // 获取已答对的题目数量
      function getCorrectAnswersCount() {
        return localStorage.getItem("correct_answers_count") || 0;
      }

      // 更新已答对的题目数量
      function updateCorrectAnswersCount(count) {
        localStorage.setItem("correct_answers_count", count);
      }

      // 获取题目字典
      function getQuestionDictionary() {
        return [
          {
            question: "Question 1",
            answer: "Answer 1"
          },
          {
            question: "Question 2",
            answer: "Answer 2"
          },
          {
            question: "Question 3",
            answer: "Answer 3"
          }
        ];
      }

      // 渲染题目
      function renderQuestions() {
        var correctAnswersCount = getCorrectAnswersCount();
        var questionDictionary = getQuestionDictionary();

        // 获取题目容器
        var questionsContainer = document.getElementById("questionsContainer");

        // 清空题目容器
        questionsContainer.innerHTML = "";

        // 根据已答对的题目数量，渲染相应数量的题目
        for (var i = 0; i < correctAnswersCount; i++) {
          var question = questionDictionary[i].question;
          var questionElement = document.createElement("p");
          questionElement.textContent = question;
          questionsContainer.appendChild(questionElement);
        }
      }

      // 初始化页面
      function initializePage() {
        renderQuestions();
      }

      // 提交答案
      function submitAnswer() {
        var answerInput = document.getElementById("answerInput");
        var answer = answerInput.value;

        // 获取当前应当回答的题目的正确答案
        var correctAnswersCount = getCorrectAnswersCount();
        var questionDictionary = getQuestionDictionary();
        var correctAnswer = questionDictionary[correctAnswersCount].answer;

        if (answer === correctAnswer) {
          // 更新已答对的题目数量
          var newCorrectAnswersCount = parseInt(correctAnswersCount) + 1;
          updateCorrectAnswersCount(newCorrectAnswersCount);

          // 清除输入框的值
          answerInput.value = "";

          // 重新渲染题目
          renderQuestions();

          // 判断是否已经解锁了所有题目
          if (newCorrectAnswersCount === questionDictionary.length) {
            // 显示 Puzzle2
            var puzzle2Div = document.getElementById("puzzle2");
            puzzle2Div.style.display = "block";
          }
        } else {
          alert("Wrong answer. Try again!");
        }
      }
    </script>
  </head>
  <body onload="initializePage()">
    <h1>Puzzle Game</h1>
    <div id="questionsContainer"></div>
    <input type="text" id="answerInput" placeholder="Enter your answer" />
    <button onclick="submitAnswer()">Submit</button>
    <div id="puzzle2" style="display: none;">
      <h2>Puzzle 2</h2>
      <!-- 在这里放置第二个谜题的内容 -->
    </div>
  </body>
</html>
