<!DOCTYPE html>
<html>
<head>
  <title>Mystery Game</title>
  <style>
    /* 自定义样式 */
    #puzzle2 {
      display: none;
      margin-top: 20px;
      padding: 10px;
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>
  <h1>Welcome to the Mystery Game!</h1>
  
  <p>Enter the correct answer to proceed to the next puzzle:</p>
  <input type="text" id="answerInput">
  <button onclick="checkAnswer()">Submit</button>

  <div id="puzzle2" style="display: none;">
    <!-- Puzzle2的内容 -->
    <h2>Puzzle 2</h2>
    <p>This is Puzzle 2.</p>
  </div>

  <script>
    // 页面加载时检查用户的提交历史
    window.onload = function() {
      var answerHistory = localStorage.getItem("answerHistory");
      if (answerHistory === "correct") {
        // 用户之前提交过正确答案，执行相应操作
        // 例如直接显示Puzzle2
        var puzzle2Div = document.getElementById("puzzle2");
        puzzle2Div.style.display = "block";
      } else {
        renderQuestions(); // 渲染题目
      }
    }

    // 检查用户的提交记录
    function checkAnswerHistory() {
      var answerHistory = localStorage.getItem("answerHistory");
      var numberOfCorrectAnswers = 0;

      if (answerHistory) {
        // 解析存储的答案记录
        var answers = answerHistory.split(",");
        numberOfCorrectAnswers = answers.length;
      }

      return numberOfCorrectAnswers;
    }

    // 根据用户的提交记录来确定题目数量
    function determineNumberOfQuestions() {
      var numberOfCorrectAnswers = checkAnswerHistory();
      var numberOfQuestionsToShow = numberOfCorrectAnswers + 4; // 显示已解答的题目加上后续的4道新题目

      return numberOfQuestionsToShow;
    }

    // 渲染题目
    function renderQuestions() {
      var numberOfQuestionsToShow = determineNumberOfQuestions();

      // 根据题目数量进行渲染
      for (var i = 1; i <= numberOfQuestionsToShow; i++) {
        var questionElement = document.createElement("p");
        questionElement.textContent = "Question " + i;
        document.body.appendChild(questionElement);
      }
    }

    // 判断回答正误
    function checkAnswer() {
      var answer = document.getElementById("answerInput").value;
      if (answer === "correct") {
        // 存储用户的正确答案
        localStorage.setItem("answerHistory", "correct");
        
        // 显示Puzzle2
        var puzzle2Div = document.getElementById("puzzle2");
        puzzle2Div.style.display = "block";
      } else {
        alert("Wrong answer. Try again!");
      }
    }
  </script>
</body>
</html>
